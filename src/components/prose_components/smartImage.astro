---
import { resolveImage, type Image, } from "../../lib/photoHelper";

interface Props extends Image {
    class?: string;
    style?: string;
    caption?: "left" | "right" | "center" | "none";
}

const { class: classes, style, caption = "center", ...image } = Astro.props;

const resolved = await resolveImage(image);

let captionClass: string;
switch (caption) {
    case "none":
        captionClass = "hidden";
        break;
    case "left":
        captionClass = "text-left";
        break;
    case "right":
        captionClass = "text-right";
        break;
    case "center":
        captionClass = "text-center";
        break;
}
---

{
    resolved && (
        <figure class={classes} style={style}>
            <img draggable="false" src={resolved.src} alt={resolved.alt} class="select-none" style={resolved.style} />
            <figcaption
                class:list={[
                    "text-center font-semibold text-sm text-gray-500 mt-2",
                    captionClass,
                ]}
            >
                {resolved.alt}
            </figcaption>
        </figure>
    )
}
